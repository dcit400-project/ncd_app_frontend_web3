<ion-header>
  <ion-toolbar>
    <ion-title><b> Patient Records </b> </ion-title>
      <!-- â˜° MENU BUTTON -->
      <ion-buttons slot="start">
        <ion-menu-button></ion-menu-button>
      </ion-buttons>
	  <!-- ðŸŒ— THEME TOGGLE -->
        <ion-button fill="clear" (click)="toggleTheme()" slot="end">
          <ion-icon [name]="isDarkMode ? 'sunny' : 'moon'" slot="icon-only"></ion-icon>
        </ion-button>
      <!-- ðŸ‘¤ PROFILE BUTTON -->
      <ion-button fill="clear" slot="end" (click)="openPopover($event)">
        <ion-icon name="person-circle" slot="icon-only"></ion-icon>
      </ion-button>
  </ion-toolbar>
</ion-header>
<!-- âœ… POPOVER FOR USER -->
<ion-popover [isOpen]="isPopoverOpen" [event]="popoverEvent" (didDismiss)="isPopoverOpen = false">
  <ng-template>
    <ion-list lines="none" class="user-popover">
      <ion-item>
        <ion-label>
          <h2>{{ username }}</h2>
          <p>{{ userRole }}</p>
        </ion-label>
      </ion-item>
      <ion-item button (click)="logout()">
        <ion-icon name="log-out-outline" slot="start"></ion-icon>
        <ion-label>Logout</ion-label>
      </ion-item>
    </ion-list>
  </ng-template>
</ion-popover>




<ion-content class="ion-padding">

  <!-- Horizontal scrollable disease list -->
	 <div class="disease-scroll">
	  <div 
		*ngFor="let disease of diseases" 
		class="disease-box"
		[class.selected]="selectedDisease === disease"
		(click)="filterByDisease(disease)">
		
		<!-- SVG Icon -->
		<div class="icon-container">
		  <img [src]="'assets/icons/' + disease.toLowerCase() + '.svg'" alt="{{ disease }} icon">
		</div>
		
		<!-- Text -->
		<div class="disease-name">
		  {{ disease }}
		</div>
	  </div>
	</div>


  <!-- Patient list -->
  <ion-list *ngIf="filteredPatients.length > 0; else noRecords">
    <ion-item-sliding *ngFor="let patient of filteredPatients">
      <ion-item lines="full" class="patient-row" (click)="viewPatient(patient)">
   
		<div class="patient-info">
		  <table>
			<tr >
			  <td  class="patient_id"><strong>Patient ID:</strong> {{ patient.user_id }}</td>
			  <td class="disease"><strong>Disease:</strong> {{ patient.condition }}</td>
			  <td class="risk"><strong>Risk:</strong> {{ patient.risk }}%</td>
			</tr>
		  </table>
		</div>

        <ion-note slot="end" color="medium">{{ patient.date }}</ion-note>
      </ion-item>
  
      <!-- Optional sliding options -->
      <ion-item-options side="end">
        <ion-item-option color="primary" (click)="viewPatient(patient)">View</ion-item-option>
        <ion-item-option color="danger" (click)="deletePatient(patient)">Delete</ion-item-option>
      </ion-item-options>
    </ion-item-sliding>
  </ion-list>
  
  <!-- No records -->
  <ng-template #noRecords>
    <ion-text color="medium">
      <p style="text-align: center;">No patient records found.</p>
    </ion-text>
  </ng-template>

</ion-content>

